Version 4
SHEET 1 2676 1204
WIRE -160 -112 -160 -128
WIRE -160 -112 -288 -112
WIRE -288 -96 -288 -112
WIRE -160 -96 -160 -112
WIRE 48 16 16 16
WIRE 736 16 128 16
WIRE -112 64 -176 64
WIRE 16 64 16 16
WIRE 16 64 -32 64
WIRE -176 96 -176 64
WIRE 368 96 368 64
WIRE 368 96 288 96
WIRE 368 112 368 96
WIRE 288 128 288 96
WIRE 16 144 16 64
WIRE 64 144 16 144
WIRE 192 160 128 160
WIRE 64 176 -128 176
WIRE 192 192 192 160
WIRE -128 224 -128 176
WIRE 368 240 368 192
WIRE 448 240 368 240
WIRE 192 272 192 256
WIRE 288 272 288 208
WIRE 288 272 192 272
WIRE 368 272 368 240
WIRE 448 272 448 240
WIRE 544 272 448 272
WIRE 192 320 192 272
WIRE 288 320 272 320
WIRE 304 320 288 320
WIRE 592 320 592 288
WIRE 624 320 592 320
WIRE 736 320 736 16
WIRE 736 320 704 320
WIRE 832 320 736 320
WIRE 976 320 832 320
WIRE 1056 320 1056 288
WIRE 1056 320 976 320
WIRE 192 352 192 320
WIRE 288 352 288 320
WIRE 976 352 976 320
WIRE 832 368 832 320
WIRE 1056 368 1056 320
WIRE 368 400 368 368
WIRE 832 480 832 448
WIRE 832 480 784 480
WIRE 464 496 416 496
WIRE 592 496 592 320
WIRE 592 496 528 496
WIRE 1056 496 1056 448
WIRE 832 512 832 480
WIRE 592 592 592 496
WIRE 592 592 528 592
WIRE 352 608 304 608
WIRE 416 608 416 496
WIRE 464 608 416 608
WIRE 192 624 192 416
WIRE 240 624 192 624
WIRE 784 624 784 480
WIRE 784 624 528 624
WIRE 416 640 416 608
WIRE 416 640 304 640
WIRE 352 688 352 608
WIRE 416 752 416 640
WIRE 832 752 832 592
WIRE 832 752 416 752
FLAG -288 -96 0
FLAG -160 -16 v-
FLAG 96 192 v-
FLAG -160 -208 v+
FLAG 96 128 v+
FLAG 1056 288 vout
FLAG 368 64 vcc
FLAG -624 352 vcc
FLAG -624 432 v0
FLAG 368 400 v0
FLAG 288 416 v0
FLAG 1056 496 v0
FLAG 976 352 0
FLAG 592 192 vcc
FLAG -128 304 v0
FLAG -176 96 v0
FLAG 496 576 v-
FLAG 496 640 v+
FLAG 272 592 v-
FLAG 272 656 v+
FLAG 352 768 v0
SYMBOL voltage -160 -224 R0
SYMATTR InstName V1
SYMATTR Value 15
SYMBOL voltage -160 -112 R0
SYMATTR InstName V2
SYMATTR Value 15
SYMBOL res 1040 352 R0
SYMATTR InstName RL
SYMATTR Value 1
SYMBOL res 144 0 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 1k
SYMBOL res -16 48 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 1k
SYMBOL voltage -128 208 R0
SYMATTR InstName V3
SYMATTR Value 0.5
SYMBOL Opamps\\OP27 96 96 R0
WINDOW 3 16 15 Left 2
SYMATTR InstName U2
SYMBOL nmos 544 192 R0
WINDOW 3 64 -5 Left 2
SYMATTR Value BSZ42DN25NS3
SYMATTR InstName M1
SYMBOL pnp 304 272 R0
SYMATTR InstName Q1
SYMATTR Value 2N3906
SYMBOL res 352 96 R0
SYMATTR InstName R4
SYMATTR Value 1k
SYMBOL res 272 112 R0
WINDOW 0 -34 40 Left 2
WINDOW 3 -52 76 Left 2
SYMATTR InstName R1
SYMATTR Value 4.7k
SYMBOL diode 208 256 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D1
SYMATTR Value 1N4148
SYMBOL res 288 304 R90
WINDOW 0 0 45 VBottom 2
WINDOW 3 27 51 VTop 2
SYMATTR InstName R12
SYMATTR Value 4.7k
SYMBOL diode 304 416 R180
WINDOW 0 -34 44 Left 2
WINDOW 3 -87 -6 Left 2
SYMATTR InstName D2
SYMATTR Value 1N4148
SYMBOL diode 176 352 R0
WINDOW 0 -69 15 Left 2
WINDOW 3 -109 42 Left 2
SYMATTR InstName D3
SYMATTR Value 1N4148
SYMBOL res 720 304 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value .1
SYMBOL res 816 352 R0
SYMATTR InstName R6
SYMATTR Value 1K
SYMBOL res 816 496 R0
SYMATTR InstName R7
SYMATTR Value 49K
SYMBOL voltage -624 336 R0
SYMATTR InstName V4
SYMATTR Value 15
SYMBOL Opamps\\OP27 496 672 R180
SYMATTR InstName U1
SYMBOL Opamps\\OP27 272 688 R180
SYMATTR InstName U3
SYMBOL voltage 352 672 R0
SYMATTR InstName V5
SYMATTR Value 2.5
SYMBOL cap 528 480 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value 100n
TEXT -288 424 Left 2 !.tran 0 100u 0 0.01u
TEXT 512 -328 Left 2 ;Configurazione avanzata usando un bjt(npn) per comandare un mosfet di tipo n
TEXT 520 -304 Left 2 ;Il circuito può essere visto come un amplificatore non invertente (G=rf/ri+1)
TEXT 504 -240 Left 2 ;il valore di vout sarò quindi il doppio della tensone che applichiamo attraverso il generaore V3, cche sarà poi sostituito da un DAC
TEXT 512 -192 Left 2 ;al variare della corrente assorbita dal carico la tensione non cambia, quindi il circuito stà regolando in maniera opportuna
